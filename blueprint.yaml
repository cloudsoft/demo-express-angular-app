services:
- type: org.apache.brooklyn.entity.webapp.nodejs.NodeJsWebAppService
  brooklyn.config:
    nodejs.gitRepo.url: https://github.com/robertgmoss/demo-express-angular-app
    nodejs.app.fileName: index.js
    shell.env:
      MONGO_CONNECTION_URL: $brooklyn:format("mongodb://%s:%s/items", entity("mongo-server").attributeWhenReady("host.name"), entity("mongo-server").attributeWhenReady("mongo.server.port"))
- type: org.apache.brooklyn.entity.nosql.mongodb.MongoDBServer
  id: mongo-server
